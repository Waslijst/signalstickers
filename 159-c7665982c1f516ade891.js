(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{"./.linaria-cache/src/components/contribute/Contribute.linaria.css":function(e,t,a){},"./src/components/contribute/Contribute.tsx":function(e,t,a){"use strict";a.r(t),function(e){var s,r=a("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=a.n(r),n=a("./node_modules/@babel/runtime/regenerator/index.js"),i=a.n(n),c=a("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=a.n(c),m=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),d=a.n(m),u=a("./node_modules/formik/dist/formik.esm.js"),b=a("./node_modules/linaria/lib/index.js"),f=a("./node_modules/linaria/react.js"),g=a("./node_modules/ramda/es/index.js"),p=a("./node_modules/ramda/es/pathEq.js"),v=a("./node_modules/ramda/es/uniq.js"),k=a("./node_modules/react/index.js"),h=a.n(k),E=a("./node_modules/react-syntax-highlighter/dist/esm/prism-async-light.js"),N=a("./node_modules/react-syntax-highlighter/dist/esm/languages/prism/yaml.js"),w=a("./node_modules/react-syntax-highlighter/dist/esm/styles/prism/base16-ateliersulphurpool.light.js"),y=a("./node_modules/js-yaml/index.js"),x=a.n(y),j=a("./node_modules/react-octicon/lib/index.js"),_=a.n(j),O=a("./src/lib/stickers.ts");(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);var S,A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},C=Object(f.styled)("div")({name:"Contribute",class:"c1b6b6t9"}),L=/^https:\/\/signal.art\/addstickers\/#pack_id=([A-Za-z0-9]+)&pack_key=([A-Za-z0-9]+)$/g,R=/^(?:([\w\d-_ ]+))+(?:, ([\w\d-_ ]+))*$/g,U={signalArtUrl:"",source:"",tags:"",isNsfw:void 0},G={signalArtUrl:(S=d()(i.a.mark((function e(t){var a,s,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","This field is required.");case 2:if(a=new RegExp(L).exec(t)){e.next=5;break}return e.abrupt("return","Invalid signal.art URL.");case 5:return s=o()(a,3),r=s[1],l=s[2],e.t0=g,e.t1=p.a(["meta","id"],r),e.next=10,Object(O.e)();case 10:if(e.t2=e.sent,!e.t0.find.call(e.t0,e.t1,e.t2)){e.next=13;break}return e.abrupt("return","A sticker pack with that ID already exists in the directory.");case 13:return e.prev=13,e.next=16,Object(O.d)(r,l);case 16:e.next=21;break;case 18:return e.prev=18,e.t3=e.catch(13),e.abrupt("return","Invalid sticker pack. Please check the pack ID and key.");case 21:case"end":return e.stop()}}),e,null,[[13,18]])}))),function(e){return S.apply(this,arguments)}),source:function(e){if(e&&e.length>320)return"This field must be no longer than 320 characters."},tags:function(e){if(""!==e&&!new RegExp(R).test(e))return"Invalid value. Tags must be a list of comma-delimited strings."},isNsfw:function(e){if(void 0===e)return"This field is required."}};E.a.registerLanguage("yaml",N.a);var T=function(){var e=Object(k.useState)(!1),t=o()(e,2),a=t[0],s=t[1],r=Object(k.useState)(""),n=o()(r,2),i=n[0],c=n[1],m=Object(k.useState)(""),d=o()(m,2),f=d[0],g=d[1],p=Object(k.useRef)(),N=function(){s(!0),c(""),g("")};return h.a.createElement(C,{className:"my-4 p-lg-3 px-lg-4"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12"},h.a.createElement("p",{className:"mt-lg-3 mb-4"},"Getting your sticker pack listed in the Signal Stickers directory is easy! First, paste the ",h.a.createElement("code",null,"signal.art")," link for your sticker pack, including the ",h.a.createElement("code",null,"pack_id")," and ",h.a.createElement("code",null,"pack_key")," values, into the form below. Then, answer a few questions about your sticker pack and add optional metadata."))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12 col-md-10 offset-md-1"},h.a.createElement(u.d,{initialValues:U,onSubmit:function(e){var t=new RegExp(L).exec(e.signalArtUrl);if(!t)throw new Error("Unable to extract pack ID and pack key from signal.art URL.");var a=o()(t,3),s=a[1],r=a[2],n=v.a(e.tags.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length})));return c(x.a.safeDump(l()({},s,{key:r,source:e.source,tags:n,nsfw:"true"===e.isNsfw}),{indent:2}).trim()),g("https://signalstickers.com/pack/".concat(s,"?key=").concat(r)),p.current.scrollIntoView({behavior:"smooth"}),!0},validateOnChange:a,validateOnBlur:a},(function(e){var t=e.values,a=e.errors,s=e.isValidating,r=e.isSubmitting;return h.a.createElement(u.c,{noValidate:!0},h.a.createElement("div",{className:"form-group"},h.a.createElement("div",{className:"form-row"},h.a.createElement("label",{className:Object(b.cx)("col-12",a.signalArtUrl&&"text-danger"),htmlFor:"signal-art-url"},"Signal Art URL:",h.a.createElement(u.b,{type:"text",id:"signal-art-url",name:"signalArtUrl",validate:G.signalArtUrl,className:Object(b.cx)("form-control",a.signalArtUrl&&"is-invalid"),placeholder:"https://signal.art/addstickers/#pack_id=<your pack id>&pack_key=<your pack key>"}),h.a.createElement("div",{className:"invalid-feedback"},h.a.createElement(u.a,{name:"signalArtUrl"})," ")))),h.a.createElement("div",{className:"form-group"},h.a.createElement("div",{className:"form-row"},h.a.createElement("label",{className:Object(b.cx)("col-12",a.source&&"text-danger"),htmlFor:"source"},"(Optional) Source:",h.a.createElement(u.b,{type:"text",id:"source",name:"source",validate:G.source,className:Object(b.cx)("form-control",a.source&&"is-invalid")}),h.a.createElement("small",{className:"form-text text-muted"},"Original author, website, company, etc."),h.a.createElement("div",{className:"invalid-feedback"},h.a.createElement(u.a,{name:"source"})," ")))),h.a.createElement("div",{className:"form-group mb-4"},h.a.createElement("div",{className:"form-row"},h.a.createElement("label",{className:Object(b.cx)("col-12",a.tags&&"text-danger"),htmlFor:"tags"},"(Optional) Tags:",h.a.createElement(u.b,{type:"text",id:"tags",name:"tags",validate:G.tags,className:Object(b.cx)("form-control",a.tags&&"is-invalid")}),h.a.createElement("small",{className:"form-text text-muted"},"Comma-separated list of words."),h.a.createElement("div",{className:"invalid-feedback"},h.a.createElement(u.a,{name:"tags"})," ")))),h.a.createElement("div",{className:"form-group"},h.a.createElement("div",{className:"form-row"},h.a.createElement("label",{className:Object(b.cx)("col-12","mb-2",a.isNsfw&&"text-danger")},"Is your sticker pack ",h.a.createElement("a",{href:"https://www.urbandictionary.com/define.php?term=NSFW",target:"_blank",rel:"noreferrer"},"NSFW"),"?")),h.a.createElement("div",{className:"form-row"},h.a.createElement("div",{className:"col-12 mb-1"},h.a.createElement("div",{className:"custom-control custom-radio"},h.a.createElement(u.b,{type:"radio",id:"is-nsfw-true",name:"isNsfw",validate:G.isNsfw,className:Object(b.cx)("custom-control-input",a.isNsfw&&"is-invalid"),value:"true",checked:"true"===t.isNsfw}),h.a.createElement("label",{className:"custom-control-label",htmlFor:"is-nsfw-true"},"Yes"))),h.a.createElement("div",{className:"col-12 mb-1"},h.a.createElement("div",{className:"custom-control custom-radio"},h.a.createElement(u.b,{type:"radio",id:"is-nsfw-false",name:"isNsfw",validate:G.isNsfw,className:Object(b.cx)("custom-control-input",a.isNsfw&&"is-invalid"),value:"false",checked:"false"===t.isNsfw}),h.a.createElement("label",{className:"custom-control-label",htmlFor:"is-nsfw-false"},"No")),h.a.createElement("div",{className:"invalid-feedback"},h.a.createElement(u.a,{name:"isNsfw"})," ")))),h.a.createElement("div",{className:"form-group"},h.a.createElement("div",{className:"form-row"},h.a.createElement("div",{className:"col-12"},h.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:r||s,onClick:N},"Generate YML")))))})))),i?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12"},h.a.createElement("hr",null),h.a.createElement("p",{className:"mt-4 mb-4"},"Great! Below is the YML blob you will need to add at the end of ",h.a.createElement("code",null,"stickers.yml")," in the ",h.a.createElement("a",{href:"https://github.com/signalstickers/signalstickers/edit/master/stickers.yml",target:"_blank",rel:"noreferrer"},"Signal Stickers repository"),"."))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12 col-md-10 offset-md-1"},h.a.createElement("div",{className:"card"},h.a.createElement(E.a,{language:"yaml",style:w.a,customStyle:{margin:"0"}},i)))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12"},h.a.createElement("p",{className:"mt-4 mb-4"},"Please also include this link in your Pull Request description, as it allows us to review your pack easily!"))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12 col-md-10 offset-md-1"},h.a.createElement("div",{className:"card mb-3"},h.a.createElement(E.a,{language:"yaml",style:w.a,customStyle:{margin:"0"}},f)))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12 col-md-10 offset-md-1"},h.a.createElement("a",{ref:p,className:"btn btn-success btn-block",href:"https://github.com/signalstickers/signalstickers/edit/master/stickers.yml",rel:"noreferrer",target:"_blank",title:"Open a Pull Request"},h.a.createElement(_.a,{name:"link-external"})," Edit the file and open a Pull Request")))):null)};A(T,"useState{[hasBeenSubmitted, setHasBeenSubmitted](false)}\nuseState{[ymlBlob, setYmlBlob]('')}\nuseState{[previewUrl, setPreviewUrl]('')}\nuseRef{openPrButton}");var P,F,H=T;t.default=H,a("./.linaria-cache/src/components/contribute/Contribute.linaria.css"),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(P.register(C,"Contribute","/home/travis/build/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),P.register(L,"SIGNAL_ART_URL_PATTERN","/home/travis/build/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),P.register(R,"TAGS_PATTERN","/home/travis/build/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),P.register(U,"initialValues","/home/travis/build/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),P.register(G,"validators","/home/travis/build/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),P.register(T,"ContributeComponent","/home/travis/build/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),P.register(H,"default","/home/travis/build/signalstickers/signalstickers/src/components/contribute/Contribute.tsx")),(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&F(e)}.call(this,a("./node_modules/webpack/buildin/harmony-module.js")(e))}}]);
//# sourceMappingURL=159-c7665982c1f516ade891.js.map